---
title: Linux笔记：磁盘分区
date: 2016-06-08 21:27:39
tags:
	- 磁盘分区
	- Linux
categories:
	- LINUX
---
# 磁盘组成复习

盘面上可以分出扇区（Sector）与柱面（Cylinder）两种单位，其中每个扇区的大小为512个字节。第一个扇区特别重要，记录了两个重要信息：

* 主引导分区（Master Boot Record，MBR）: 可以安装引导加载程序的地方，大小为446 bytes。
* 分区表（partition table）：记录了整个硬盘的分区状态，大小为64 bytes。
<!--more-->

# 磁盘分区表（Partition Table）

利用参考柱面号码的方式来处理。在分区表中的64 bytes容量中，总共被分为四个区，每组区记录了该区的开始与结束柱面的号码。如下图：
![cmd-markdown-logo](https://raw.githubusercontent.com/TsubasaBAKU/BLOGIMG/master/%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA%E8%A1%A8.png)
假设上图中的设备文件名为/dev/hda,那么这四个分区在Linux系统中的设备文件名分别为:
P1: /dev/hda1
P2: /dev/hda2
P3: /dev/hda3
p4: /dev/hda4
当有数据要写入P4分区中时，其实就是写入了301~400之间的柱面中。

**由于分区表只有64 bytes，所以最多只能分为四个分区，而这四个分区又被区分为主分区（Primary）和扩展分区（Extended）。**

我们可以得到以下四点重要的信息：
**1. 其实所谓的“分区”，只是对分区表进行了设置而已。**
**2. 分区表默认最多写入四组分区信息**
**3. 四组分区又被分为主分区和扩展分区**
**4. 分区的最小单位是柱面**

# 逻辑分区

如上所说，分区表内默认最多只能写入四组分区信息，又被区分为主分区和扩展分区。然而在平时的使用中，我们使用的远远不止四个分区，这是为什么呢？
首先，我们需要指出的是：扩展分区的想法就是，既然第一个扇区的分区表中只能写入四组分区信息，那么是否可以利用其它扇区来记录分区信息呢？实际上这就是扩展分区的目的，扩展分区就是利用额外的扇区来记录分区信息，而扩展分区本身不能被拿来格式化，于是就有了逻辑分区。
**逻辑分区（Logical partition）：由扩展分区分割而得来的分区。**如下图：
![cmd-markdown-logo](https://raw.githubusercontent.com/TsubasaBAKU/BLOGIMG/master/%E9%80%BB%E8%BE%91%E5%88%86%E5%8C%BA%E8%A1%A8.png)
在上图中，第一个扇区中分区表中只有两组信息：一个主分区（1~100）和一个扩展分区（101~400）。而在扩展分区的分区记录表中，又有五条逻辑分区的记录，说明扩展分区被划分成了五个逻辑分区。那么这几个分区在Linux系统中设备文件的名称分别为：
P1: /dev/hda1
P2: /dev/hda2
L1: /dev/hda5
L2: /dev/hda6
L3: /dev/hda7
L4: /dev/hda8
L5: /dev/hda9
**那么hda3和hda4呢？这是由于前四个号码都是保留个Primary或者Extended用的，所以逻辑分区的编号就从5开始了，这是个很重要的特性。**

我们在这里做个简单的定义：
**1. 主分区加扩展分区最多只能有四个（硬盘限制）。**
**2. 扩展分区最多只能有一个（操作系统限制）。**
**3. 能够被格式化后作为数据访问的分区是主分区和逻辑分区，扩展分区不能被格式化。**


