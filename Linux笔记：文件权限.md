---
title: Linux笔记：文件权限
date: 2016-06-11 20:23:07
tags:
	- 文件权限
	- Linux
categories:
	- LINUX
---
# 文件所有者，用户组，其他人

首先应该明白这三个概念，简单的解释下：

1. 文件所有者：即文件的所属人，文件属于哪个用户。
2. 用户组： 一组用户，该组中的用户对于某个文件具有相同的权限。
3. 其他人：非用户组的其它用户。

**这里需要注意的一点就是，同一个用户可以属于多个不同的用户组。**
<!--more-->

# Linux文件权限

## 文件属性

这里我们以root身份登录Linux系统，执行“ls -al”命令，可看到下图：
![cmd-markdown-logo](https://raw.githubusercontent.com/TsubasaBAKU/BLOGIMG/master/Linux%E6%96%87%E4%BB%B6%E5%B1%9E%E6%80%A7.png)
我们以其中的一条记录来做较详细的解释：
>  -rw-r--r-- 1 root root 176 Jan 6 2007 .bashrc

-rw-r--r--代表的是文件的类型和权限。
第一个字符代表的是文件的类型，即这个文件是目录，普通文件，链接文件或者其他等。

* 若第一个字符是d，则代表该文件是一个目录
* 若第一个字符是-，则代表该文件是一个普通文件
* 若是l，则代表该文件是一个链接文件
* 若是b，则代表设备文件里的可供存储的接口设备
* 若是c，则代表设备文件里的串行端口设备，例如键盘鼠标等

接下来的字符以三个为一组，分别代表文件所有者的权限，所属用户组的权限，其它人的权限

* r：代表可读权限
* w：代表可写权限
* x：代表可执行权限

根据以上描述，可得出rw-代表可读和可写权限，不包括可执行的权限。

紧接着“1”代表有多少个文件名连接到此节点。每个文件都会将它的权限与属性记录到文件系统的i-node中，不过我们使用的目录树却是使用文件名来记录，因此每个文件名就会连接到一个i-node。这个属性就是记录有多少个不同的文件名连接到一个相同的i-node号码。

紧接着的“root”代表当前文件所属的用户是root，跟以上所述，root对该文件的权限是rw-。

第二个“root”代表着文件所属者root所在的用户组是root，该用户组中的用户对该文件的权限是r--。

紧接着“176”代表文件大小，单位是B。

最后的两组数据就一目了然了，分别代表文件最后修改时间和文件名。

**注意：所有以“.”开头的文件都是隐藏文件，使用ls命令不显示隐藏文件。**

# 三个命令

* chgrp：改变用户所属的用户组。
* chown：改变文件所属者。
* chmod：改变文件权限。

前两个命令十分简单，比如chgrp users install.log即将install.log文件的用户组改为users，chown aa install.log即将install.log的所有者改为aa这个用户。

我们来重点看下第三个命令，chmod改变用户权限。
改变文件权限的方式有两种：使用数字或者使用符号。

## 使用数字改变文件权限

我们使用数字来代表各个权限，分别是

* r：4
* w：2
* x：1

每种身份的权限是需要累加的，比如-rwxwrx---：

* owner=4+2+1=7
* group=4+2+1=7
* others=0

假设我们需要把.bashrc这个文件的权限改为-rwxrwxrwx，则我们使用chmod的用法为：

* chmod 777 .bashrc

## 使用符号来改变文件权限

我们使用u，g，o来代表user，group，other身份的权限，a代表全部身份，现在假设我们需要把.bashrc文件改为当前用户有所有权限，用户组和其他人只有读和执行权限，那么我们使用chmod的用法为：

* chmod u=rwx,go=rx .bashrc

# 权限对目录以及文件的意义

## 权限对文件的意义

1. r：可读取文件的实际内容，即读取文本文件的文字内容等。
2. w：可以编辑，新增或者是修改该文件的内容，但不含删除该文件。
3. x：该文件具有被系统执行的权限。LInux中，文件能否被执行是由是否具有“x”权限来决定的，跟文件名没有绝对的关系。

## 权限对目录的意义

1. r：具有读取目录结构列表的权限，可以利用ls来将该目录的结构列表显示出来。
2. w：具有更改该目录结构列表的权限：新建文件与目录，删除文件与目录，重命名文件与目录，转移该目录内的文件或者目录位置。
3. x：代表用户是否能进入该目录称为工作目录，工作目录就是用户目前所在的怒路。


